<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <meta charset="utf-8"> 
  <title>MAZE | A L</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/customize.css">
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="navbar-left">
      <a href="index.html" class="navbar-home" title="Home">
        <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
          <path d="M3 11l9-9 9 9h-2v8a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4h-2v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-8H3z" stroke="white" stroke-width="2" fill="none"/>
        </svg>
      </a>
    </div>
    <div class="navbar-right">
      <a href="#about">ABOUT</a>
      <a href="#contacts">CONTACTS</a>
      <a href="#projects">PROJECTS</a>
    </div>
  </nav>
  
  <div class="project-glass-wrapper">
    <!-- Blocco 1: COPERTINA -->
    <div class="glass-box">
  <div class="cover-head">
    <h1 class="cover-title">MAZE</h1>
    <div class="cover-icons">
      <a href="https://editor.p5js.org/armand.lala0/sketches/Fm1-8SXYY" target="_blank" title="Vai al progetto JS" class="icon-btn">
        <span class="icon-js">JS*</span>
      </a>
      <a href="doc/project3.pdf" target="_blank" download title="Scarica PDF" class="icon-btn">
        <svg height="20" width="20" viewBox="0 0 20 20" fill="none" stroke="white" stroke-width="2">
          <rect x="4" y="2" width="12" height="16" rx="2" fill="none"/>
          <path d="M8 6h4M8 10h4M8 14h4"/>
        </svg>
      </a>
    </div>
  </div>
  <img src="images/yellow.png" alt="Blue Project" class="cover-img">

    </div>
    <!-- Blocco 2: DESCRIZIONE -->
    <div class="glass-box">
      <p>
        This project realizes an interactive maze game leveraging core programming concepts such as arrays, loops, conditionals, recursion, and event-driven input, implemented in p5.js. The maze is stored as a two-dimensional array (maze), where each cell object maintains a walls array of four booleans representing the presence of walls on its top, right, bottom, and left edges. The recursive maze generation uses Depth-First Search (generateMaze function) by marking cells as visited (visited flag) and systematically removing walls between adjacent cells, ensuring a perfect maze without cycles. Additional complexity is introduced by randomly removing walls between cells (addExtraOpenings), which adjusts difficulty dynamically.
Player position is managed with grid coordinates (cx, cy) and pixel coordinates (px, py), facilitating smooth movement animation within the draw loop. Movement direction is stored as a vector (movingDir) with components set in the keyPressed event handler, responding to arrow key inputs. Collision checks are performed by indexing the current cell’s walls array with a direction index mapped by getDirectionIndex(dx, dy) to prevent moving through walls. The movement interpolation uses vector arithmetic to advance the player's pixel position incrementally, providing fluid visual feedback.
A notable feature is the pathfinding component implemented via Breadth-First Search (findSolutionBFS), which utilizes a queue and parent arrays to explore reachable cells efficiently and reconstruct the shortest path from start to exit. This path is animated as a “ghost” using the startGhost function, where the ghost’s position advances along the solution path at controlled intervals (ghostStepDelay), with rendering handled by drawing partial paths and ghost ellipses in distinct colors.
Rendering leverages p5.js drawing functions: line() to depict walls with precise positioning based on cell coordinates and dimensions (cellW, cellH), rect() for start and exit zones with transparency for user guidance, and ellipse() for player and ghost representations. The player’s trail is implemented as an array of pixel positions (trail) that is updated intelligently in each movement step to avoid redundant points, enhancing the visual feedback on the path taken.
User input is managed in dedicated handlers keyPressed() and keyReleased(), supporting movement control, level reset, difficulty adjustment through numeric keys, and toggling the ghost visualization with the 'P' key. The use of booleans such as gameWon and ghostActive enables precise state management, ensuring that game logic and animations respond correctly to user actions.
The game maintains a responsive layout by recalculating maze dimensions and cell sizes in the setup() function and responding to browser window changes via windowResized(). Persistent storage of best times through localStorage is incorporated for performance tracking across sessions, with timers implemented by tracking millis() at start and completion events.
</p>
    </div>
    <!-- Blocco 3: GALLERIA -->
    <div class="glass-box">
      <h3>IMAGE GALLERY</h3>
      <div class="gallery-row">
        <img src="images/project_3/1.png" alt="img1" class="gallery-img">
        <img src="images/project_3/2.png" alt="img2" class="gallery-img">
        <img src="images/project_3/3.png" alt="img3" class="gallery-img">
        <img src="images/project_3/4.png" alt="img4" class="gallery-img">
        <img src="images/project_3/5.png" alt="img5" class="gallery-img">
        <!-- altre immagini se vuoi -->
      </div>
    </div>
  </div>

    <div class="row one-bottom center">
    <p>©ARMAND LALA 2025</p>
  </div>
</div>
  
  <script src="js/p5.js"></script>
  <script src="js/p5.sound.min.js"></script>
  <script src="js/mold.js"></script>
  <script src="js/sketch.js"></script>

  <!-- POPUP OVERLAY -->
<div id="img-popup" style="display:none;position:fixed;z-index:10000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.77);justify-content:center;align-items:center;">
  <span id="popup-prev" class="popup-arrow" aria-label="Precedente">&lt;</span>
  <img id="img-popup-big" src="" style="max-width:90vw;max-height:85vh;border-radius:14px;box-shadow:0 6px 32px rgba(60,60,80,0.16);border:3px solid #fff;">
  <span id="popup-next" class="popup-arrow" aria-label="Successiva">&gt;</span>
</div>

<script>
const images = Array.from(document.querySelectorAll('.gallery-img'));
let currentIndex = 0;

function showPopup(index) {
  if(index < 0 || index >= images.length) return;
  currentIndex = index;
  document.getElementById('img-popup-big').src = images[currentIndex].src;
  document.getElementById('img-popup').style.display = 'flex';
}

images.forEach((img, idx) => {
  img.style.cursor = "pointer";
  img.onclick = function(e) {
    e.stopPropagation();
    showPopup(idx);
  }
});

function closePopup() {
  document.getElementById('img-popup').style.display = 'none';
}

document.getElementById('img-popup').onclick = closePopup;

document.getElementById('popup-prev').onclick = function(e) {
  e.stopPropagation();
  showPopup((currentIndex - 1 + images.length) % images.length);
};
document.getElementById('popup-next').onclick = function(e) {
  e.stopPropagation();
  showPopup((currentIndex + 1) % images.length);
};

// Tastiera: ← (37), → (39), ESC (27)
document.addEventListener('keydown', function(e) {
  if(document.getElementById('img-popup').style.display === 'flex') {
    if(e.key === 'ArrowLeft') {
      showPopup((currentIndex - 1 + images.length) % images.length);
      e.preventDefault();
    }
    if(e.key === 'ArrowRight') {
      showPopup((currentIndex + 1) % images.length);
      e.preventDefault();
    }
    if(e.key === 'Escape') {
      closePopup();
      e.preventDefault();
    }
  }
});
</script>


</body>
</html>
